DLXï¼ŒDead-Letter-Exchangeã€‚åˆ©ç”¨ DLX ï¼Œå½“æ¶ˆæ¯åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å˜æˆæ­»ä¿¡ï¼ˆdead messageï¼‰ä¹‹åï¼Œå®ƒèƒ½è¢«é‡æ–° publish åˆ°å¦ä¸€ä¸ª Exchange ï¼Œè¿™ä¸ª Exchange å°±æ˜¯DLXã€‚æ¶ˆæ¯å˜æˆæ­»ä¿¡ä¸€å‘æœ‰ä¸€ä¸‹å‡ ç§æƒ…å†µï¼š

- æ¶ˆæ¯è¢«æ‹’ç»ï¼ˆbasic.reject / basic.nackï¼‰å¹¶ä¸” `requeue=false` ã€‚
- æ¶ˆæ¯ TTL è¿‡æœŸï¼ˆå‚è€ƒï¼šRabbitMQä¹‹TTLï¼ˆTime-To-Live è¿‡æœŸæ—¶é—´ï¼‰ï¼‰ã€‚
- é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦ã€‚

è¯¦ç»†çš„ï¼Œå¯ä»¥çœ‹çœ‹ [ã€ŠRabbitMQ ä¹‹æ­»ä¿¡é˜Ÿåˆ—ã€‹](http://www.iocoder.cn/RabbitMQ/dead-letter-queue/?vip) æ–‡ç« ã€‚

ğŸ¦… **â€œdead letterâ€queue çš„ç”¨é€”ï¼Ÿ**

å½“æ¶ˆæ¯è¢« RabbitMQ server æŠ•é€’åˆ° consumer åï¼Œä½† consumer å´é€šè¿‡ `Basic.Reject` è¿›è¡Œäº†æ‹’ç»æ—¶ï¼ˆåŒæ—¶è®¾ç½® `requeue=false`ï¼‰ï¼Œé‚£ä¹ˆè¯¥æ¶ˆæ¯ä¼šè¢«æ”¾å…¥ â€œdead letterâ€ queue ä¸­ã€‚è¯¥ queue å¯ç”¨äºæ’æŸ¥ message è¢« reject æˆ– undeliver çš„åŸå› ã€‚

ğŸ¦… **`Basic.Reject` çš„ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ**

è¯¥ä¿¡ä»¤å¯ç”¨äº consumer å¯¹æ”¶åˆ°çš„ message è¿›è¡Œ reject ã€‚

- è‹¥åœ¨è¯¥ä¿¡ä»¤ä¸­è®¾ç½® `requeue=true` ï¼Œåˆ™å½“ RabbitMQ server æ”¶åˆ°è¯¥æ‹’ç»ä¿¡ä»¤åï¼Œä¼šå°†è¯¥ message é‡æ–°å‘é€åˆ°ä¸‹ä¸€ä¸ªå¤„äº consume çŠ¶æ€çš„ consumer å¤„ï¼ˆç†è®ºä¸Šä»å¯èƒ½å°†è¯¥æ¶ˆæ¯å‘é€ç»™å½“å‰ consumerï¼‰ã€‚
- è‹¥è®¾ç½® `requeue=false` ï¼Œåˆ™ RabbitMQ server åœ¨æ”¶åˆ°æ‹’ç»ä¿¡ä»¤åï¼Œå°†ç›´æ¥å°†è¯¥ message ä» queue ä¸­ç§»é™¤ã€‚

å¦å¤–ä¸€ç§ç§»é™¤ queue ä¸­ message çš„å°æŠ€å·§æ˜¯ï¼Œconsumer å›å¤ `Basic.Ack` ä½†ä¸å¯¹è·å–åˆ°çš„ message åšä»»ä½•å¤„ç†ã€‚è€Œ `Basic.Nack`æ˜¯å¯¹ Basic.Reject çš„æ‰©å±•ï¼Œä»¥æ”¯æŒä¸€æ¬¡æ‹’ç»å¤šæ¡ message çš„èƒ½åŠ›ã€‚